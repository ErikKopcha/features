<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Copy to buffer</title>
</head>

<body>
  <script>
    class CopyToBuffer{
      constructor(elementId) {
        this.elemetn = document.getElementById(elementId);

        this.init();
      }

      init() {
        elementId,addEventListener('click', () =>{
          this.copyTextToClipboard(`${window.location.href}/copy-to-buffer/`);
        });
      }
    }

    copyTextToClipboard(string) {
      var textarea;
      var result;

      try {
        textarea = document.createElement('textarea');
        textarea.setAttribute('readonly', true);
        textarea.setAttribute('contenteditable', true);
        textarea.style.position = 'fixed'; // prevent scroll from jumping to the bottom when focus is set.
        textarea.value = string;

        document.body.appendChild(textarea);

        textarea.focus();
        textarea.select();

        var range = document.createRange();
        range.selectNodeContents(textarea);

        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);

        textarea.setSelectionRange(0, textarea.value.length);
        result = document.execCommand('copy');
      } catch (err) {
        console.error(err);
        result = null;
      }

      document.body.removeChild(textarea);
    }

    copyReferalLink() {
      let modalInvitationClose = document.getElementById('modal_invitation-close'),
        modalInvitation = document.getElementById('modal_invitation-sent');

      modalInvitationClose.addEventListener('click', () => {
        modalInvitation.classList.add('hidden');
      });

      let buttonForCopyHref = document.getElementById('copy'),
        copySuccessBlock = document.querySelector('.copy-success');

      buttonForCopyHref.addEventListener('click', (evt) => {
        evt.preventDefault();
        const url = buttonForCopyHref.getAttribute('data-href');
        this.copyTextToClipboard(url);

        copySuccessBlock.style.display = 'block';
        setTimeout(_ => {
          copySuccessBlock.style.display = "none"
        }, 2000);
        return false;
      });
    }
  </script>
</body>

</html>